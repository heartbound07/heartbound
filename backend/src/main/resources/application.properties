spring.application.name=heartbound2

server.port=8080
server.servlet.context-path=/api

spring.datasource.url=jdbc:postgresql://postgres:5432/heartbound
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.jpa.hibernate.ddl-auto=validate
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.access-token-expiration-ms=900000
jwt.refresh-token-expiration-ms=2592000000
jwt.refresh-secret=${JWT_REFRESH_SECRET}

# JWT Performance Caching Configuration
jwt.cache.enabled=true
jwt.cache.token-validation.max-size=15000
jwt.cache.token-validation.expire-after-write-minutes=15
jwt.cache.claims.max-size=10000
jwt.cache.claims.expire-after-write-minutes=15
jwt.cache.user-details.max-size=10000
jwt.cache.user-details.expire-after-write-minutes=15

# Enhanced CORS Configuration - Comprehensive Security Settings
cors.allowed-origins=http://localhost:3000,http://localhost:5173
cors.allowed-origins.production=https://app.heartbound.net,https://www.heartbound.net
cors.allowed-origins.staging=https://staging.heartbound.com
cors.allowed-headers=Content-Type,Authorization,X-Requested-With,Accept,Origin,X-CSRF-Token
cors.exposed-headers=X-Rate-Limit-Remaining,X-Rate-Limit-Limit,X-Rate-Limit-Reset,X-Total-Count
cors.max-age=3600
cors.allow-credentials=true

# CORS Origin Validation Configuration
cors.origin.validation.enabled=true
cors.origin.pattern.enabled=true
cors.origin.patterns=https://*.heartbound.net

# CORS Validation and Monitoring Configuration
cors.validation.enabled=true
cors.validation.max-rejections-per-hour=10
cors.validation.alert-threshold=5

# Logging
logging.level.org.springframework.security=DEBUG
logging.level.com.app.heartbound=DEBUG

# Discord OAuth settings
discord.client-id=${DISCORD_CLIENT_ID}
discord.client-secret=${DISCORD_CLIENT_SECRET}
discord.redirect-uri=http://localhost:8080/api/oauth2/callback/discord
discord.scopes=identify guilds.join guilds

# Admin configuration
admin.discord.id=${ADMIN_DISCORD_ID}

# Rate Limiting Configuration
rate.limit.max-requests=100
rate.limit.window-minutes=1
rate.limit.burst-capacity=120
rate.limit.cleanup-interval-ms=3600000
rate.limit.cache-maximum-size=100000

# Enhanced Rate Limiting for Financial Endpoints
rate.limit.purchase.per-minute=5
rate.limit.purchase.per-hour=20
rate.limit.purchase.burst-capacity=6

rate.limit.case-open.per-minute=10
rate.limit.case-open.per-hour=50
rate.limit.case-open.burst-capacity=12

rate.limit.equip.per-minute=30
rate.limit.equip.per-hour=200
rate.limit.equip.burst-capacity=35

# HTML Sanitization Configuration
html.sanitization.enabled=true
html.sanitization.strict-mode=true
html.sanitization.log-sanitization=true
html.sanitization.max-item-name-length=100
html.sanitization.max-description-length=500

# Security Headers Configuration
security.csp.enabled=true
security.csp.report-only=false
security.csp.report-uri=
security.headers.enabled=true

# Rate Limiting Metrics Configuration
rate.limit.metrics-cleanup-interval-ms=7200000

# Pairing System Cache Configuration
cache.pair-level.max-size=5000
cache.pair-level.expire-after-write-minutes=15
cache.achievement.max-size=1000
cache.achievement.expire-after-write-minutes=60
cache.voice-streak.max-size=2000
cache.voice-streak.expire-after-write-minutes=10
cache.user-profile.max-size=10000
cache.user-profile.expire-after-write-minutes=30
cache.batch-operations.max-size=100
cache.batch-operations.expire-after-write-minutes=5

# Daily Message Activity Cache Configuration
cache.daily-activity.max-size=5000
cache.daily-activity.expire-after-write-minutes=30

# Daily Claim Cache Configuration
cache.daily-claim.max-size=10000
cache.daily-claim.expire-after-write-minutes=60

# Discord Bot Settings Cache Configuration
cache.discord-bot-settings.max-size=1
cache.discord-bot-settings.expire-after-write-minutes=30

# Prison Cache Configuration
cache.prison.max-size=1000
cache.prison.expire-after-write-hours=72

# Counting Game Cache Configuration
cache.counting-game.max-size=100
cache.counting-game.expire-after-write-minutes=15

# Giveaway Cache Configuration
cache.giveaway.max-size=200
cache.giveaway.expire-after-write-minutes=10

# Discord Bot Configuration (Values sourced from .env)
discord.token=${DISCORD_BOT_TOKEN}
discord.server.id=${DISCORD_SERVER_ID}
# Guild ID where commands like /fish are allowed
discord.main.guild.id=${DISCORD_MAIN_GUILD_ID}
discord.guild.id=1161658340418523166
discord.category.id=${DISCORD_CATEGORY_ID}
# Category for pairing channels (optional - will use root if not specified)
discord.pairing.category.id=${DISCORD_PAIRING_CATEGORY_ID:1381698583178383502}
# Explicitly define required Gateway Intents for the starter
discord.gateway-intents=GUILD_MEMBERS,GUILD_VOICE_STATES,MESSAGE_CONTENT

# Frontend URL for all redirects and callbacks
frontend.base.url=http://localhost:3000

# Enable debug logging for the Discord starter
logging.level.com.zgamelogic=DEBUG

# Static Resources Configuration
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/**
spring.web.resources.cache.period=3600
spring.web.resources.chain.enabled=true

# Add this line near the frontend.base.url property
backend.base.url=http://localhost:8080/api

# Chat Activity Rewards Configuration
discord.activity.enabled=true
discord.activity.credits-to-award=5
discord.activity.message-threshold=5
discord.activity.time-window-minutes=60
discord.activity.cooldown-seconds=30
discord.activity.min-message-length=15

# Leveling System Configuration
discord.leveling.enabled=true
discord.leveling.xp-to-award=15
discord.leveling.base-xp=100
discord.leveling.level-multiplier=50
discord.leveling.level-exponent=2
discord.leveling.level-factor=5
discord.leveling.credits-per-level=50

# Discord Starter Role Configuration (removed when user reaches first level milestone)
discord.leveling.starter-role-id=1303106353014771773

# Discord Leaderboard Configuration
discord.leaderboard.enabled=true
discord.leaderboard.channel.id=1383120828182564864

# Discord Achievement Notifications Configuration
discord.achievements.enabled=true
discord.achievements.mention-users=true

# Discord Pairing Message Validation Configuration (Anti-spam)
discord.pairing.validation.enabled=true
discord.pairing.validation.cooldown-seconds=30
discord.pairing.validation.min-message-length=15
discord.pairing.validation.time-window-minutes=60
discord.pairing.validation.message-threshold=10

# Discord Pairing XP System Configuration
discord.pairing.xp.enabled=true
discord.pairing.xp.per-message=10
discord.pairing.xp.cooldown-seconds=45
discord.pairing.xp.min-message-length=20
discord.pairing.xp.max-per-hour=50
discord.pairing.xp.show-embeds=true

# HTML/CSS to Image API Configuration
htmlcsstoimage.user_id=${HTML_CSS_TO_IMAGE_USER_ID}
htmlcsstoimage.api_key=${HTML_CSS_TO_IMAGE_API_KEY}

# Secure Random Configuration
secure.random.algorithm=SHA1PRNG
secure.random.provider=SUN
secure.random.seed.refresh.interval=3600000
secure.random.pool.size=1000

# Roll Verification Configuration
roll.verification.chi-square.threshold=10.83
roll.verification.win-rate.tolerance=5.0
roll.verification.high-frequency.threshold=50
roll.verification.pattern.window.hours=24

# Roll Audit Configuration
roll.audit.enabled=true
roll.audit.retention.days=90
roll.audit.batch.size=100

