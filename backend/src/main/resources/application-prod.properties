spring.application.name=heartbound2

server.port=${PORT:8080}
server.servlet.context-path=/api

# Heroku PostgreSQL Configuration
spring.datasource.url=jdbc:postgresql://${JDBC_DATABASE_URL}:${JDBC_PORT}/${JDBC_DATABASE_NAME}
spring.datasource.username=${JDBC_DATABASE_USERNAME}
spring.datasource.password=${JDBC_DATABASE_PASSWORD}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update

# Connection Pool Settings - Enhanced for WebSocket Performance
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.validation-timeout=3000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=30000
spring.datasource.hikari.connection-test-query=SELECT 1

# JWT Configuration - Use environment variables for security
jwt.secret=${JWT_SECRET}
jwt.access-token-expiration-ms=900000
jwt.refresh-token-expiration-ms=2592000000
jwt.refresh-secret=${JWT_REFRESH_SECRET}

# JWT Performance Caching Configuration - Optimized for production
jwt.cache.enabled=true
jwt.cache.token-validation.max-size=25000
jwt.cache.token-validation.expire-after-write-minutes=8
jwt.cache.claims.max-size=15000
jwt.cache.claims.expire-after-write-minutes=8
jwt.cache.user-details.max-size=15000
jwt.cache.user-details.expire-after-write-minutes=8

# CORS Configuration - Update with your production frontend URL
cors.allowed-origins=${FRONTEND_URL:https://heartbound-jet.vercel.app}
cors.max-age=3600
cors.allow-credentials=true

# Production Logging Configuration
logging.level.org.springframework.security=INFO
logging.level.com.app.heartbound=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.com.zgamelogic=INFO

# Discord OAuth settings
discord.client-id=${DISCORD_CLIENT_ID}
discord.client-secret=${DISCORD_CLIENT_SECRET}
discord.redirect-uri=${DISCORD_REDIRECT_URI:https://heartbound-api.herokuapp.com/api/oauth2/callback/discord}
discord.scopes=identify email guilds.join guilds

# Admin configuration
admin.discord.id=${ADMIN_DISCORD_ID}

# Rate Limiting Configuration - More restrictive in production
rate.limit.max-requests=60
rate.limit.window-minutes=1
rate.limit.burst-capacity=100
rate.limit.cleanup-interval-ms=3600000
rate.limit.cache-maximum-size=100000

# Discord Bot Configuration
discord.token=${DISCORD_BOT_TOKEN}
discord.server.id=${DISCORD_SERVER_ID}
discord.category.id=${DISCORD_CATEGORY_ID}
# Category for pairing channels (optional - will use root if not specified)
discord.pairing.category.id=${DISCORD_PAIRING_CATEGORY_ID:1381698583178383502}
discord.gateway-intents=GUILD_MEMBERS,GUILD_VOICE_STATES,MESSAGE_CONTENT

# Frontend URL for all redirects and callbacks
frontend.base.url=${FRONTEND_URL:https://heartbound-jet.vercel.app}

# Backend URL for all redirects and callbacks
backend.base.url=${BACKEND_URL:https://heartbound-d00f1b55e2ad.herokuapp.com/api}

# Heroku-specific configurations
spring.mvc.async.request-timeout=60000
# Chat Activity Rewards Configuration - More conservative in production
discord.activity.enabled=true
discord.activity.credits-to-award=5
discord.activity.message-threshold=7
discord.activity.time-window-minutes=120
discord.activity.cooldown-seconds=60
discord.activity.min-message-length=20

# Leveling System Configuration
discord.leveling.enabled=true
discord.leveling.xp-to-award=15
discord.leveling.base-xp=100
discord.leveling.level-multiplier=50
discord.leveling.level-exponent=2
discord.leveling.level-factor=5
discord.leveling.credits-per-level=50